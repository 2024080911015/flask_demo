# 蜡烛燃烧动画 Flask 应用

一个使用 Flask 框架实现的交互式蜡烛燃烧动画网页应用，展示一根蜡烛在 18 秒内燃烧的逼真动画效果。

## 功能特点

- **精确计时**：蜡烛燃烧总时长严格控制在 18 秒
- **交互控制**：提供开始、暂停、重置按钮，用户可自由控制动画
- **逼真效果**：
  - 火焰自然跳动（CSS 动画）
  - 蜡烛随时间变短并产生蜡滴
  - 火焰颜色随燃烧变暗
  - 燃烧末期产生烟雾效果
- **实时反馈**：计时器、进度条和状态显示实时更新
- **响应式设计**：适配不同屏幕尺寸

## 文件结构

```
flask_demo/
├── app.py                    # 现有Flask应用（未修改，端口5000）
├── candle_app.py             # 蜡烛动画Flask应用（新，端口5001）
├── templates/
│   └── candle.html          # 蜡烛动画页面模板
├── static/
│   ├── css/
│   │   └── candle.css       # 蜡烛样式和动画效果
│   └── js/
│       └── candle.js        # 蜡烛动画逻辑和交互控制
└── README.md                # 项目说明文档
```

## 运行方法

### 前提条件
- Python 3.7+
- Flask 库（首次运行会自动安装）

### 启动应用
1. 打开终端，进入项目目录：
   ```bash
   cd c:\Users\iiijj\Desktop\flask_demo
   ```

2. 启动蜡烛动画应用：
   ```bash
   python candle_app.py
   ```

3. 应用将在 http://127.0.0.1:5001 启动

### 可选：同时运行现有应用
如果需要同时运行现有的 `app.py`（端口5000）：
```bash
# 新终端窗口
python app.py
```
现有应用将在 http://127.0.0.1:5000 运行

## 使用说明

### 界面布局
1. **蜡烛显示区**：中央显示蜡烛、火焰、蜡滴和烟雾效果
2. **控制面板**：
   - 计时器：显示剩余燃烧时间（18.0秒倒计时）
   - 进度条：可视化显示燃烧进度
   - 控制按钮：开始、暂停、重置
   - 状态显示：当前动画状态

### 交互操作
1. **开始燃烧**：点击"开始燃烧"按钮启动18秒动画
2. **暂停动画**：点击"暂停"按钮暂停当前动画，保持状态
3. **重置状态**：点击"重置"按钮恢复蜡烛初始状态
4. **重新开始**：重置后点击"开始燃烧"可重新播放

### 动画效果详解
- **0-6秒**：火焰明亮跳动，蜡烛开始变短
- **6-12秒**：火焰颜色逐渐变暗，蜡滴开始显现
- **12-18秒**：火焰明显变小，烟雾效果出现，蜡烛显著变短
- **18秒**：火焰熄灭，燃烧完成

## 技术实现

### 前端技术
- **HTML5**：页面结构和语义化标签
- **CSS3**：
  - Flexbox 布局实现响应式设计
  - CSS 动画实现火焰跳动效果
  - 渐变背景和阴影增强视觉效果
- **JavaScript (ES6)**：
  - `CandleAnimation` 类封装动画逻辑
  - `requestAnimationFrame` 实现平滑动画
  - 事件监听处理用户交互

### 动画逻辑
- **计时精度**：使用 `Date.now()` 确保18秒精确计时
- **状态同步**：火焰大小、蜡烛高度、蜡滴效果同步更新
- **视觉效果**：
  - 火焰位置随蜡烛高度动态调整
  - 火焰颜色使用 RGB 渐变实现变暗效果
  - 蜡滴使用透明度和位移实现流动效果

### 后端框架
- **Flask**：轻量级 Web 框架
- **Jinja2 模板**：HTML 模板渲染
- **静态文件服务**：自动服务 CSS 和 JavaScript 文件

## 代码说明

### candle_app.py
```python
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def candle_animation():
    """渲染蜡烛燃烧动画页面"""
    return render_template('candle.html')

if __name__ == "__main__":
    # 使用5001端口，避免与现有app.py冲突
    app.run(host="127.0.0.1", port=5001, debug=True)
```

### candle.js 核心逻辑
- `CandleAnimation` 类：管理整个动画状态
- `updateVisualEffects()`：更新所有视觉效果
- `resetVisualEffects()`：重置所有效果到初始状态
- `complete()`：处理动画完成时的特殊效果

## 自定义调整

### 修改燃烧时间
在 `static/js/candle.js` 中修改 `totalTime` 值：
```javascript
this.totalTime = 18; // 改为其他秒数
```

### 调整视觉效果
- **蜡烛燃烧速度**：修改 `updateVisualEffects()` 中的 `0.85` 系数
- **火焰缩小速度**：修改 `updateVisualEffects()` 中的 `0.8` 系数
- **效果出现时机**：调整蜡滴和烟雾的进度阈值

### 修改样式
在 `static/css/candle.css` 中：
- 修改颜色方案
- 调整蜡烛尺寸
- 更改布局和响应式断点

## 常见问题

### 端口冲突
如果5001端口已被占用，修改 `candle_app.py` 中的端口号：
```python
app.run(host="127.0.0.1", port=5002, debug=True)  # 改为其他端口
```

### 模块未找到错误
首次运行前确保安装 Flask：
```bash
pip install flask
```

### 动画卡顿
- 确保使用现代浏览器（Chrome、Firefox、Edge等）
- 关闭其他占用资源的程序
- 检查浏览器开发者工具中的控制台错误

## 浏览器兼容性
- Chrome 60+ ✓
- Firefox 55+ ✓
- Edge 79+ ✓
- Safari 12+ ✓
- 移动端浏览器 ✓

## 扩展思路

1. **多蜡烛模式**：支持同时燃烧多根蜡烛
2. **自定义蜡烛**：允许选择不同颜色和样式的蜡烛
3. **音效增强**：添加燃烧音效和环境声
4. **保存状态**：保存/加载燃烧进度
5. **分享功能**：生成动画截图或视频

## 许可证
本项目仅供学习和演示使用。

---

**提示**：此应用独立于现有的 `app.py` 文件，不会对其产生任何影响。两个应用可同时运行在不同端口。